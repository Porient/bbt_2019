<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bbt.back.dao.PhoneDao">
    <resultMap id="phoneMap" type="com.bbt.back.entities.Phone">
        <id column="product_id" property="productId" />
        <result column="brand" property="brand" />
        <result column="product_name" property="productName" />
        <result column="performance" property="performance" />
        <result column="interfaces" property="interfaces" />
        <result column="front_camera" property="frontCamera" />
        <result column="rear_camera" property="rearCamera" />
        <result column="photo_features" property="photoFeatures" />
        <result column="body" property="body" />
        <result column="communication" property="communication" />
        <result column="endurance" property="endurance" />
        <result column="screen" property="screen" />
        <result column="other" property="other" />
        <result column="price" property="price" />
        <result column="url" property="url" />
        <result column="appearance1" property="appearance1" />
        <result column="appearance2" property="appearance2" />
        <result column="appearance3" property="appearance3" />
        <result column="tag1" property="tag1" />
        <result column="tag2" property="tag2" />
        <result column="tag3" property="tag3" />
        <result column="product_type" property="product_type" />
        <result column="library" property="library" />
        <result column="product_analysis" property="productAnalysis" />
    </resultMap>

    <delete id="deletePhone" parameterType="java.lang.Integer">
      delete from `phone`
      where product_id = #{productId}
    </delete>

    <insert id="insertPhone" parameterType="com.bbt.back.entities.Phone">
    insert into `phone` (brand, product_name, performance,
      interfaces, front_camera, rear_camera, photo_features, body, communication,
      endurance, screen, other, price, url,
      appearance1, appearance2, appearance3, tag1, tag2, tag3, screen, product_type,
      library, product_analysis)
    values (#{brand}, #{productName}, #{performance}, #{interfaces}, #{frontCamera}, #{rearCamera}, #{photoFeatures}, #{body},
            #{communication}, #{endurance}, #{screen}, #{other}, #{price}, #{url}, #{appearance1}, #{appearance2},
            #{appearance3}, #{tag1}, #{tag2}, #{tag3}, #{productType}, #{library}, #{productAnalysis})
  </insert>

    <update id="updatePhone" parameterType="com.bbt.back.entities.Phone">
        update `phone`
        <set>
            <if test="brand != null and brand != ''"> brand = #{brand},</if>
            <if test="productName != null and productName != ''"> product_name = #{productName},</if>
            <if test="performance != null and performance != ''"> performance = #{performance},</if>
            <if test="interfaces != null and interfaces != ''"> interfaces = #{interfaces},</if>
            <if test="frontCamera != null and frontCamera != ''"> front_camera = #{frontCamera},</if>
            <if test="rearCamera != null and rearCamera != ''"> rear_camera = #{rearCamera},</if>
            <if test="photoFeatures != null and photoFeatures != ''"> photo_features = #{photoFeatures},</if>
            <if test="body != null and body != ''"> body = #{body},</if>
            <if test="communication != null and communication != ''"> communication = #{communication},</if>
            <if test="endurance != null and endurance != ''"> endurance = #{endurance},</if>
            <if test="other != null and other != ''"> other = #{other},</if>
            <if test="price != null and price != ''"> price = #{price},</if>
            <if test="url != null and url != ''"> url = #{url},</if>
            <if test="appearance1 != null and appearance1 != ''"> appearance1 = #{appearance1},</if>
            <if test="appearance2 != null and appearance2 != ''"> appearance2 = #{appearance2},</if>
            <if test="appearance3 != null and appearance3 != ''"> appearance3 = #{appearance3},</if>
            <if test="tag1 != null and tag1 != ''"> tag1 = #{tag1},</if>
            <if test="tag2 != null and tag2 != ''"> tag2 = #{tag2},</if>
            <if test="tag3 != null and tag3 != ''"> tag3 = #{tag3},</if>
            <if test="product_type != null and product_type != ''"> product_type = #{productType},</if>
            <if test="library != null and library != ''"> library = #{library},</if>
            <if test="productAnalysis != null and productAnalysis != ''"> product_analysis = #{productAnalysis}</if>
        </set>
        where product_id = #{productId}
    </update>

    <select id="findPhoneById" parameterType="java.lang.Integer" resultMap="phoneMap">
      select p.*
      from `phone` p
      where p.product_id = #{productId}
    </select>

    <select id="selectAll" parameterType="java.lang.Integer" resultMap="phoneMap">
      select p.*
      from `phone` p
    </select>
    
</mapper>