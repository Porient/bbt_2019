<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bbt.back.dao.RecordDao">
    <resultMap id="recordMap" type="com.bbt.back.entities.Record">
        <id column="record_id" property="recordId" />
        <result column="product_id" property="productId" />
        <result column="product_name" property="productName" />
        <result column="browse_time" property="browseTime" />
        <result column="browse_num" property="browseNum" />
    </resultMap>

    <delete id="deleteRecord" parameterType="java.lang.Integer">
      delete from `record`
      where record_id = #{recordId}
    </delete>

    <insert id="insertRecord" parameterType="com.bbt.back.entities.Record">
    insert into `record` (product_id, product_name, browse_time, browse_num)
    values (#{productId}, #{productName}, #{browseTime}, #{browseNum})
  </insert>

    <update id="updateRecord" parameterType="com.bbt.back.entities.Record">
        update `record`
        <set>
            <if test="productId != null and productId != ''"> product_id = #{productId},</if>
            <if test="productName != null and productName != ''"> product_name = #{productName},</if>
            <if test="browseTime != null and browseTime != ''"> browse_time = #{browseTime},</if>
            <if test="browseNum != null and browseNum != ''"> browse_num = #{browseNum}</if>
        </set>
        where record_id = #{recordId}
    </update>

    <select id="findRecordById" parameterType="java.lang.Integer" resultMap="recordMap">
      select r.*
      from `record` r
      where r.record_id = #{recordId}
    </select>

    <select id="selectAll" parameterType="java.lang.Integer" resultMap="recordMap">
      select r.*
      from `record` r
    </select>

    
</mapper>